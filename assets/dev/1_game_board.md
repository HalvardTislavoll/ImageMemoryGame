# a singel game board

by Halvard Tislavoll, 2024

I am working on the development of "Bondegårdslotto". It is a picture game for children. When I had to make a game board for each player with nine pictures on each, I encountered challenges. The images must be arranged arbitrarily in a dict. First I made nine canvases in one form in Page (Python Automated GUI Generator). Here is the support file, step by step:

```python
#! /usr/bin/env python3
#  -*- coding: utf-8 -*-
#
# Support module generated by PAGE version 8.0
#  in conjunction with Tcl version 8.6
#    Jan 01, 2024 10:13:02 PM CET  platform: Linux

import sys
import tkinter as tk
import tkinter.ttk as ttk
from tkinter.constants import *

import game_board
```

Here is the import code given by Page. I have to add other required modules:

```python
# Importing other required modules
try:
    import os
    from PIL import Image, ImageTk
    import random
    import shared as sh
except:
    print("can't import essential modules")
    sys.exit()
```

I have chosen to place the required module import in the try except statement since it can handle exceptions. Exceptions may happen when you run the program. Since it is not possible to run scripted without these essential modules, the script must stop with a message to the user.

- os is used in def init_path() to get current path

- PIL is used to load images and transform it to correct size with the .thumbnail method

- random is used to provide random order for images in dict_randomization

- share is used for global scope for some variabels 

Furthermore, I get from Page a global variable for use when debugging and a main function that connects the support file with the gui file.
The function ends with a root.mainloop block. This ends tkinter's loop. Therefore, I have added a call to my startup function before this block.

```python
_debug = True # False to eliminate debug printing from callback functions.

def main(*args):
    '''Main entry point for the application.'''
    global root
    root = tk.Tk()
    root.protocol( 'WM_DELETE_WINDOW' , root.destroy)
    # Creates a toplevel widget.
    global _top1, _w1
    _top1 = root
    _w1 = game_board.Toplevel1(_top1)
    game_board_startup()
    root.mainloop()
```

Note: images have got names of numbers like '1.png', '2.png' and so on. This is a prerequisite

The game board startup function initializes necessary variables and finally starts the display image function to display the result on the screen.

```python
def game_board_startup():
    sh.im_dict = {}
    sh.rnd_im_dict={}
    init_canvas()
    init_path()
    img_number = 9   # set number of images to load
    # make a list of all image names by List Comprehension
    sh.im_lst=[f'{x}.png' for x in range(1,img_number+1)]
    ## print(im_lst)   # ['1.png', '2.png', '3.png', '4.png', '5.png', '6.png', ...]
    init_image_dict()
    sh.rnd_im_dict = dict_randomization(sh.im_dict)
    display_image()
```

The variables are initialized using a number of functions that I have chosen to place in their own Init Section

```python
#   ========================================================
#     Init Section
#   ========================================================

def init_canvas():
    # give the canvas global names and create a list of these
    sh.can1 = _w1.Canvas1
    sh.can2 = _w1.Canvas2
    sh.can3 = _w1.Canvas3
    sh.can4 = _w1.Canvas4
    sh.can5 = _w1.Canvas5
    sh.can6 = _w1.Canvas6
    sh.can7 = _w1.Canvas7
    sh.can8 = _w1.Canvas8
    sh.can9 = _w1.Canvas9
    sh.canvas_lst = [sh.can1, sh.can2, sh.can3, sh.can4, sh.can5, sh.can6, sh.can7, sh.can8, sh.can9]

def init_path():
    # parent dir path
    sh.path_parent = os.getcwd()
    # photo dir path
    sh.path_photo = sh.path_parent+"/assets/lotto_graphics"

def init_image_dict():
    # make a dict with all images
    sh._img=[]
    global _img   # garbage collection funktion in Python is the reason
    for inx, im in enumerate(sh.im_lst):
        if inx < 9:
            # join path and filename to photo_location for a photo
            fn = im
            photo_location = os.path.join(sh.path_photo,fn)
            #loading the image 
            original = Image.open(photo_location)
            # Create a thumbnail
            thumbnail_size=(200,200)
            original.thumbnail(thumbnail_size)   # 600x600 -> 200x200
            sh._img.append(inx+1)   
            sh._img[inx] = ImageTk.PhotoImage(original)
            # save original to dict
            _img=f'{sh._img[inx]}'   # key is a string representation
            if not _img in sh.im_dict:
                # add a tkinter image representation of PIL image into the dict
                sh.im_dict[_img] = ImageTk.PhotoImage(original)
```

I have chosen to place some supporting functions for the game board application in a separate Support Section

```python
#   ========================================================
#     Support Section
#   ========================================================

def dict_randomization(d):
    '''make a new dict with keys in random order by iterating over 
       the dictionary, get the list of items in a tuple with .items() 
       then shuffle and iterate through this list using the shuffle()
    '''
    rnd_d={}
    items = list(d.items()) # List of tuples of (key,values)
    random.shuffle(items)
    for key, value in items:
        # print(key, ":", value)
        rnd_d[key]=value
    return rnd_d

def display_image():
    # display nine images from dict into canvases, a game board
    num=0
    for key, value in sh.rnd_im_dict.items():
        sh.canvas_lst[num].create_image((100, 100), image=value, anchor='center')
        # remember x,y is center of image
        num+=1
```

Now I have made a game board with nine pictures in random order.
Images are retrieved from a dict when they are placed on the canvas as planned.
Furthermore, the plan is to make it possible for up to four players, each with their own game board. But it will be its own project
