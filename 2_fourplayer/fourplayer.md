# fourplayer gameboard demo

by Halvard Tislavoll, 2024

"fourplayer" is a project that follows from the project "game board".  I simply copied the code and then made changes here. To study the code I have copied, it is recommended to study game_board.md. The title "a single game board" tells what the project is doing.

The changes I make here give the game board new properties such as playing color, four unique game boards and four buttons to show off the different players' game boards.

As I said, I started from "game_board.tcl" I started Page and borrowed Tkinter Toplevel from this file. New now is that I wanted to show the color for the current player. I do that by creating a Frame and placing the nine canvases that I borrow from borrowed Tkinter Toplevel. Furthermore, I changed Tkinter Toplevel's heigt so that I could place four buttons, one for each player under the Frame.

9x4=36 images are required and is expected to be placed in the /assets/graphic folder with image names like 1.png ... 26.png

Here is the initial code for this project..

```python
#! /usr/bin/env python3
#  -*- coding: utf-8 -*-
#
# Support module generated by PAGE version 8.0
#  in conjunction with Tcl version 8.6
#    Jan 03, 2024 01:46:23 PM CET  platform: Linux

import sys
import tkinter as tk
import tkinter.ttk as ttk
from tkinter.constants import *

import fourplayer

# Importing other required modules
try:
    from PIL import Image, ImageTk
    import random
except:
    # can't import essential modules
    sys.exit()
```

This is very similar to game_board.py, but then comes a new module import part, "Create share module and import it into the script" on the fly

```python
#   ========================================================
#     Create share module and import it into the script
#   ========================================================
import os
module_name = "shared"   # empty_module
# Create the empty module file
with open(f"{module_name}.py", "w") as file:
    pass  # This creates an empty file
# Check if the file exists before importing
if os.path.isfile(f"{module_name}.py"):
    import importlib.util
    spec = importlib.util.spec_from_file_location(module_name, f"{module_name}.py")
    module = importlib.util.module_from_spec(spec)
    spec.loader.exec_module(module)
else:
    print(f"File '{module_name}.py' does not exist. Failed to import the module.")
sh=importlib   # sh is alias shared for short
#   ========================================================
```

The module "shared", sh is the abbreviation for share, is used for global scope for some variabels and is essential. Here I have taken into account that a problem arises if the module is not found in the folder. I have therefore made it so that the program creates the module itself and imports it.

New names reflect new project so that former def game_board_startup() now becomes def fourplayer_startup()

```python
def fourplayer_startup():
    _top1.title("fourplayer")
    sh.im_dict = {}   # a dict to hold all images from disc
    sh.rnd_im_dict={}   # a dict to hold all images in random order
    # init a image dict for each player
    sh.player1_im={}
    sh.player2_im={}
    sh.player3_im={}
    sh.player4_im={}
    sh.player_lst=[sh.player1_im, sh.player2_im, sh.player3_im, sh.player4_im]
    sh.player=0
    sh.form_color_lst=['blue', 'green', 'yellow', 'red']
    sh.style = ttk.Style()
    make_mystyle()
    set_form_color(sh.player)
    set_button_color()
    init_canvas()
    init_path()
    img_number = 36   # set number of images to load
    # make a list of all image names by List Comprehension
    sh.im_lst=[f'{x}.png' for x in range(1,img_number+1)]
    ## print(im_lst)   # ['1.png', '2.png', '3.png', '4.png', '5.png', '6.png', '7.png', '8.png', '9.png', '10.png', '11.png', '12.png', '13.png', '14.png', '15.png', '16.png', '17.png', '18.png', '19.png', '20.png', '21.png', '22.png', '23.png', '24.png', '25.png', '26.png', '27.png', '28.png', '29.png', '30.png', '31.png', '32.png', '33.png', '34.png', '35.png', '36.png']
    init_image_dict()
    sh.rnd_im_dict = dict_randomization(sh.im_dict)
    init_players_image_dict(sh.rnd_im_dict)
    player_dict=sh.player_lst[sh.player]
    display_image(player_dict) # player 1 at init
```

* init a image dict for each player to hold nine unique images
* init a player list to hold all four player dict variable names
* init player which keeps track of the current player
* init form color list, one color for each player
* init ttk.Style()
* call a function for further more widget style, make_mystyle()
* call a function, set_form_color(sh.player)
* call a function, set_button_color() so the color of the player button reflects the color of the players  Frame
* change number from 9 to 36; img_number = 36   # set number of images to load
* call a function, init_players_image_dict(sh.rnd_im_dict)   # split dict into four equal chunks and load four player dict
* init player_dict with current player from player list give the variable name of current player dict
* call a function, display_image with current player dict to put current player images into canvases

Here are the functions mentioned ...

```python
def make_mystyle():
    # set TFrame style
    sh.style.map('TFrame',
                background=[('active', '#8B8878'),   # bg2),
                            ('disabled', 'gray76'),
                            ('readonly', 'firebrick2')],
                bordercolor=[('active', '#FFFAFA'),   # fg2),
                            ('disabled', 'gray24'),   # fg1),
                            ('readonly', 'gray50')]   # fg3)],
                )
    sh.style.map('TButton',
                background=[('active', '#8B8878'),
                            ('disabled', 'gray76'),
                            ('readonly', 'firebrick2')],
                foreground=[('active', '#FFFAFA'),
                            ('disabled', 'gray24'),
                            ('readonly', 'gray50')]
                )    

def set_form_color(player):
    # change background color to player color
    sh.style.configure('MyTFrame.TFrame',
                    background=sh.form_color_lst[player],
                    bordercolor='gray24')
    _w1.TFrame1.configure(style='MyTFrame.TFrame')

def set_button_color():
    for inx, button in enumerate(sh.button_lst):
        sh.style.configure(sh.id_lst[inx],
                    background='#8B8878',
                    foreground=sh.form_color_lst[inx]
                        )
        button.configure(style=sh.id_lst[inx])
```

def make_mystyle():
Defines background and bordercolor attributes for Tkinter Ttk.TFrame and Ttk.TButton widgets

def set_form_color(player):
set TFrame1 color by uses the newly defined widgets

def set_button_color():
Gives the newly defined buttons font color according to player color

```python
def init_players_image_dict(rnd_im_dict):
    # split dict into four equal chunks
    cnt=1
    for key, values in rnd_im_dict.items():
        if cnt==1:
            sh.player1_im[key]=values
        elif cnt==2:
            sh.player2_im[key]=values
        elif cnt==3:
            sh.player3_im[key]=values
        elif cnt==4:
            sh.player4_im[key]=values
        cnt+=1
        if cnt==5:
            cnt=1
```

def init_players_image_dict(rnd_im_dict):   # split dict into four equal chunks

This function takes in a random dict which is reviewed and add items to four different player dicts.

```python
def display_image(player_dict):
    num=0
    for key, value in player_dict.items():
        set_form_color(sh.player)
        sh.canvas_lst[num].create_image((100, 100), image=value, anchor='center')   # remember x,y is center of image
        num+=1
```

def display_image(player_dict)::
Here, the nine images for the player are placed on each of their canvases

Finally I add three lines to the four player button callback functions Page gave me

```python
def on_TBtnPlayer1(*args):
    if _debug:
        print('fourplayer_support.on_TBtnPlayer1')
        for arg in args:
            print ('    another arg:', arg)
        sys.stdout.flush()
    sh.player=0
    player_dict=sh.player_lst[sh.player]
    display_image(player_dict)

def on_TBtnPlayer2(*args):
    if _debug:
        print('fourplayer_support.on_TBtnPlayer2')
        for arg in args:
            print ('    another arg:', arg)
        sys.stdout.flush()
    sh.player=1
    player_dict=sh.player_lst[sh.player]
    display_image(player_dict)

def on_TBtnPlayer3(*args):
    if _debug:
        print('fourplayer_support.on_TBtnPlayer3')
        for arg in args:
            print ('    another arg:', arg)
        sys.stdout.flush()
    sh.player=2
    player_dict=sh.player_lst[sh.player]
    display_image(player_dict)

def on_TBtnPlayer4(*args):
    if _debug:
        print('fourplayer_support.on_TBtnPlayer4')
        for arg in args:
            print ('    another arg:', arg)
        sys.stdout.flush()
    sh.player=3
    player_dict=sh.player_lst[sh.player]
    display_image(player_dict)
```

Now this application is functional!

The game board have new properties such as playing color, four unique game boards and four buttons to show off the different players' game boards.

The next project will be to name four players using the entrybox, and put player names on the four buttons
